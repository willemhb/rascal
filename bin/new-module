#!/bin/bash

# SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )
# echo $SCRIPT_DIR

HEADER_TEMPLATE="/home/willem/Programming/C/rascal/include/tpl/module.h.tpl"
CFILE_TEMPLATE="/home/willem/Programming/C/rascal/include/tpl/module.c.tpl"

MODULE_PATH="$1/$2"
MODULE_NAME="${MODULE_PATH//\//_}"
MODULE_HPATH="/home/willem/Programming/C/rascal/include/$MODULE_PATH.h"
MODULE_CPATH="/home/willem/Programming/C/rascal/src/$MODULE_PATH.c"

# echo "header template: $HEADER_TEMPLATE"
# echo "C file template: $CFILE_TEMPLATE"
# echo "module path: $MODULE_PATH"
# echo "module name: $MODULE_NAME"
# echo "module header path: $MODULE_HPATH"
# echo "module file path: $MODULE_CPATH"

sed "s:%path%:$MODULE_PATH:g; s:%name%:$MODULE_NAME:g" "$HEADER_TEMPLATE" >> "$MODULE_HPATH"
sed "s:%path%:$MODULE_PATH:g; s:%name%:$MODULE_NAME:g" "$CFILE_TEMPLATE" >> "$MODULE_CPATH"

# echo "created $MODULE_HPATH and $MODULE_CPATH."
